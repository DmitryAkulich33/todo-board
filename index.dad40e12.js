const e=JSON.parse(window.localStorage.getItem("todos"))||[{id:1,title:"Homework 1. Git. Introduction.",description:"Download and install git.\nCreate repository and clone it locally. \nCreate a new branch. \nPush code there. \nCreate pull request.",state:"completed",date:"01.04.2022",userId:1},{id:2,title:"Homework 2. Javascript Basic.",description:"Look through examples file. \nComplete normal level of tasks. \nComplete advanced level of tasks. \nCreate pull request. \nRead additional material.",state:"completed",date:"05.04.2022",userId:4},{id:3,title:"Homework 3. Javascript Basic.",description:"Look through examples file. \nComplete normal level of tasks. \nComplete advanced level of tasks. \nCreate pull request. \nRead additional material.",state:"in progress",date:"10.04.2022",userId:2},{id:4,title:"Homework 4. Javascript Basic.",description:"Look through examples file. \nComplete normal level of tasks. \nComplete advanced level of tasks. \nCreate pull request. \nRead additional material.",state:"in progress",date:"15.04.2022",userId:3},{id:5,title:"Homework 5. Javascript Basic.",description:"Look through examples file. \nComplete normal level of tasks. \nComplete advanced level of tasks. \nCreate pull request. \nRead additional material.",state:"new",date:"20.04.2022",userId:5},{id:6,title:"Homework 6. Javascript Basic.",description:"Look through examples file. \nComplete normal level of tasks. \nComplete advanced level of tasks. \nCreate pull request. \nRead additional material.",state:"new",date:"29.04.2022",userId:6},{id:7,title:"Homework 7. Final project. End of course",description:"Choose app to implement. \nCreate structure of new app. \nImplement all features mentioned in tech debt. \nTest it. \nFix bugs and prepare to demonstrate app.",state:"new",date:"30.04.2022",userId:6}];let t=[];function n(){window.localStorage.setItem("todos",JSON.stringify(e))}function o(e){!function(e){window.localStorage.setItem("users",JSON.stringify(e))}(e),t=JSON.parse(window.localStorage.getItem("users"))}var r=function(e,t=""){const n=document.createElement(e);return n.className=t,n};function i(e){const t=r("div","list-item-actions"),n=r("button","list-item-edit"),o=r("button","list-item-delete");return n.innerHTML="Edit todo",o.innerHTML="Delete",function(e,t,n,o){"new"==o&&e.append(t,n),"completed"==o&&e.append(n)}(t,n,o,e),t}function c(e,t){const n=r("div","list-item");n.draggable=!0,n.id=`list-item_${e.id}`;const o=function(e){const t=r("div","list-item-title"),n=r("span");return n.innerHTML=e.title,t.append(n),t}(e),c=function(e){const t=r("div","list-item-description"),n=r("p");return n.innerHTML=e.description,t.append(n),t}(e),a=function(e,t){const n=r("div","list-item-info"),o=r("span","user-info");o.id=`user-info_${t.id}`,o.innerHTML=`${t.name}`;const i=r("span","time-info");return i.innerHTML=e.date,n.append(o,i),n}(e,t),d=i(e.state);return n.append(o,c,a,d),n}var a=function(){const n=document.querySelectorAll(".list");e.forEach((e=>{const o=t.find((t=>t.id===e.userId)),r=c(e,o),i=function(e){switch(e){case"new":default:return 0;case"in progress":return 1;case"completed":return 2}}(e.state);n[i].append(r)}))};function d(e,t){const n=r("select","user-selector"),o=function(){const e=r("option");return e.value="default",e.hidden=!0,e.selected="true",e.innerHTML="Select user",e}(),i=function(e,t){const n=[];return e.forEach((e=>{const o=r("option");o.value=e.id,o.innerHTML=`${e.name}`,t&&t.userId==e.id&&(o.selected="true"),n.push(o)})),n}(e,t);return n.name="user-selector",n.append(o,...i),n}function s(e,t){const n=r("div","todo-popup-form-actions"),o=d(e,t),i=function(){const e=r("div","todo-popup-form-buttons"),t=r("button","cancel-btn"),n=r("button","confirm-btn");return t.type="button",t.innerHTML="Cancel",n.type="button",n.innerHTML="Confirm",e.append(t,n),e}();return n.append(o,i),n}function l(e,t){const n=r("form","todo-popup-form-add"),o=function(e){const t=r("input","todo-item-title");return t.type="text",t.placeholder="Enter todo title ...",t.value=e?e.title:"",t}(t),i=function(e){const t=r("textarea","todo-item-description");return t.placeholder="Enter todo description ...",t.value=e?e.description:"",t}(t),c=s(e,t);return n.append(o,i,c),n}function u(e,t){const n=document.querySelector("body"),o=r("div","todo-popup"),i=r("div","todo-popup-body"),c=r("div","todo-popup-content"),a=l(e,t);c.append(a),i.append(c),o.append(i),n.append(o)}function p(){document.querySelector(".todo-popup").remove()}var m=function(e,t,n,o){this.id=e,this.title=t,this.description=n,this.userId=o,this.state="new",this.date=(new Date).toLocaleDateString()};function f(e,t){const n=document.querySelector("body"),o=r("div","warning-popup"),i=r("div","warning-popup-body"),c=r("div","warning-popup-content"),a=function(e){const t=r("span","warning-popup-text");return t.innerHTML=e,t}(e),d=function(e){const t=r("form","warning-popup-form");if(e){const e=r("button","warning-popup-cancel-btn");e.type="button",e.innerHTML="Cancel",t.append(e)}const n=r("button","warning-popup-confirm-btn");return n.type="button",n.innerHTML="Confirm",t.append(n),t}(t);c.append(a,d),i.append(c),o.append(i),n.append(o)}function v(){document.querySelector(".warning-popup").remove()}var y=function(){const e=document.querySelectorAll(".list"),t=document.querySelector("#new-todo-count"),n=document.querySelector("#in-progress-todo-count"),o=document.querySelector("#completed-todo-count");t.innerHTML=e[0].childElementCount,n.innerHTML=e[1].childElementCount,o.innerHTML=e[2].childElementCount};var g=function(e,t,n){const o=document.querySelectorAll(".popup-error-message");let i=!0;if(o.length>0&&o.forEach((e=>e.remove())),!e||!t||!n){const o=document.querySelector(".todo-item-title"),c=document.querySelector(".todo-item-description"),a=document.querySelector(".todo-popup-form-actions");if(i=!1,!e){const e=r("span","popup-error-message");e.innerHTML="Field title can not be empty",o.after(e)}if(!t){const e=r("span","popup-error-message");e.innerHTML="Field description can not be empty",c.after(e)}if(!n){const e=r("span","popup-error-message");e.innerHTML="Field select can not be empty",a.after(e)}}return i};function L(e){return Number(e.split("_")[1])}let S=null;function h(e){S=e.target,setTimeout((()=>{e.target.classList.add("hidden-state")}),0)}function q(e){setTimeout((()=>{e.target.classList.remove("hidden-state"),S=null}),0)}function w(e){e.preventDefault()}function b(t){const o=t.target.closest(".boards-item"),r=o.querySelector(".list");if(r.childElementCount>=6&&r.closest("#boards-item_in-progress")){f("6 items is a maximum count of todo items in this boards",!1);return void document.querySelector(".warning-popup-confirm-btn").addEventListener("click",(e=>{e.preventDefault(),e.target.classList.remove("hidden-state"),v()}))}let c=function(e){return e.split("_")[1].replace("-"," ")}(o.id);const a=L(S.id);e.find((e=>e.id==a)).state=c,function(e,t){e.querySelector(".list-item-actions").remove();const n=i(t);e.append(n)}(S,c),n(),this.append(S),y()}function k(){const o=document.querySelector(".add-btn"),r=document.querySelectorAll(".list"),i=document.querySelector(".delete-all-btn");o.addEventListener("click",(()=>{u(t);const o=document.querySelector(".cancel-btn"),i=document.querySelector(".confirm-btn");o.addEventListener("click",(e=>{e.preventDefault(),p()})),i.addEventListener("click",(o=>{o.preventDefault();const i=function(){const t=document.querySelector(".todo-item-description"),n=document.querySelector(".todo-item-title"),o=document.querySelector(".user-selector"),r=e.length>0?e[e.length-1].id+1:0,i=n.value,c=t.value,a=Number(o.options[o.selectedIndex].value);if(!g(i,c,a))return;return new m(r,i,c,a)}();if(!i)return;const a=t.find((e=>e.id==i.userId)),d=c(i,a);var s;e.push(i),r[0].append(d),n(),(s=d).addEventListener("dragstart",h),s.addEventListener("dragend",q),p(),y()}))})),i.addEventListener("click",(()=>{f("Do you really want to delete all items?",!0);const t=document.querySelector(".warning-popup-cancel-btn"),o=document.querySelector(".warning-popup-confirm-btn");t.addEventListener("click",(e=>{e.preventDefault(),v()})),o.addEventListener("click",(t=>{t.preventDefault();document.querySelector("#boards-item_completed").querySelector(".list").innerHTML="",function(){for(let t=0;t<e.length;t++)"completed"==e[t].state&&(e.splice(t,1),t--)}(),n(),v(),y()}))})),r.forEach((o=>o.addEventListener("click",(o=>{const r=o.target.closest(".list-item"),{classList:i}=o.target,c=L(r.id),a=e.findIndex((e=>e.id===c));if(i.contains("list-item-delete")&&(e.splice(a,1),r.remove(),n(),y()),i.contains("list-item-edit")){u(t,e[a]);const o=document.querySelector(".cancel-btn"),i=document.querySelector(".confirm-btn");o.addEventListener("click",(e=>{e.preventDefault(),p()})),i.addEventListener("click",(o=>{o.preventDefault();const i=e[a];(function(e){const t=document.querySelector(".todo-item-title"),n=document.querySelector(".todo-item-description"),o=document.querySelector(".user-selector"),r=t.value,i=n.value,c=Number(o.options[o.selectedIndex].value);if(!g(r,i,c))return;return e.title=r,e.description=i,e.userId=c,e.date=(new Date).toLocaleDateString(),e})(i)&&(!function(e,n){const o=e.querySelector(".list-item-title"),r=e.querySelector(".list-item-description"),i=e.querySelector(".user-info"),c=e.querySelector(".time-info");o.innerHTML=n.title,r.innerHTML=n.description,i.innerHTML=t.find((e=>e.id==n.userId)).name,c.innerHTML=(new Date).toLocaleDateString()}(r,i),n(),p())}))}}))))}var H=function(){setInterval((()=>{const e=new Date;document.querySelector(".clock").innerHTML=e.toLocaleTimeString()}),1e3)};function E(){H(),a(),y(),k(),function(){const e=document.querySelectorAll(".list-item"),t=document.querySelectorAll(".list");e.forEach((e=>{e.addEventListener("dragstart",h),e.addEventListener("dragend",q)})),t.forEach((e=>{e.addEventListener("dragover",w),e.addEventListener("drop",b)}))}()}(function(){return fetch("https://jsonplaceholder.typicode.com/users").then((e=>e.json()))})().then((e=>o(e))).then((()=>E()));
//# sourceMappingURL=index.dad40e12.js.map
