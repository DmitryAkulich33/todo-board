!function(){var e=JSON.parse(window.localStorage.getItem("todos"))||[{id:1,title:"Homework 1. Git. Introduction.",description:"Download and install git.\nCreate repository and clone it locally. \nCreate a new branch. \nPush code there. \nCreate pull request.",state:"completed",date:"01.04.2022",userId:1},{id:2,title:"Homework 2. Javascript Basic.",description:"Look through examples file. \nComplete normal level of tasks. \nComplete advanced level of tasks. \nCreate pull request. \nRead additional material.",state:"completed",date:"05.04.2022",userId:4},{id:3,title:"Homework 3. Javascript Basic.",description:"Look through examples file. \nComplete normal level of tasks. \nComplete advanced level of tasks. \nCreate pull request. \nRead additional material.",state:"in progress",date:"10.04.2022",userId:2},{id:4,title:"Homework 4. Javascript Basic.",description:"Look through examples file. \nComplete normal level of tasks. \nComplete advanced level of tasks. \nCreate pull request. \nRead additional material.",state:"in progress",date:"15.04.2022",userId:3},{id:5,title:"Homework 5. Javascript Basic.",description:"Look through examples file. \nComplete normal level of tasks. \nComplete advanced level of tasks. \nCreate pull request. \nRead additional material.",state:"new",date:"20.04.2022",userId:5},{id:6,title:"Homework 6. Javascript Basic.",description:"Look through examples file. \nComplete normal level of tasks. \nComplete advanced level of tasks. \nCreate pull request. \nRead additional material.",state:"new",date:"29.04.2022",userId:6},{id:7,title:"Homework 7. Final project. End of course",description:"Choose app to implement. \nCreate structure of new app. \nImplement all features mentioned in tech debt. \nTest it. \nFix bugs and prepare to demonstrate app.",state:"new",date:"30.04.2022",userId:6}],t=[];function n(){window.localStorage.setItem("todos",JSON.stringify(e))}function r(e){!function(e){window.localStorage.setItem("users",JSON.stringify(e))}(e),t=JSON.parse(window.localStorage.getItem("users"))}var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.createElement(e);return n.className=t,n},i="new",a="in progress",u="completed";function c(e){var t=o("div","list-item-actions"),n=o("button","list-item-edit"),r=o("button","list-item-delete");return n.innerHTML="Edit todo",r.innerHTML="Delete",function(e,t,n,r){r==i&&e.append(t,n),r==u&&e.append(n)}(t,n,r,e),t}function d(e,t){var n=o("div","list-item");n.draggable=!0,n.id="list-item_".concat(e.id);var r=function(e){var t=o("div","list-item-title"),n=o("span");return n.innerHTML=e.title,t.append(n),t}(e),i=function(e){var t=o("div","list-item-description"),n=o("p");return n.innerHTML=e.description,t.append(n),t}(e),a=function(e,t){var n=o("div","list-item-info"),r=o("span","user-info");r.id="user-info_".concat(t.id),r.innerHTML="".concat(t.name);var i=o("span","time-info");return i.innerHTML=e.date,n.append(r,i),n}(e,t),u=c(e.state);return n.append(r,i,a,u),n}var l=function(){var n=document.querySelectorAll(".list");e.forEach((function(e){var r=t.find((function(t){return t.id===e.userId})),o=d(e,r),c=function(e){switch(e){case i:return 0;case a:return 1;case u:return 2;default:return 0}}(e.state);n[c].append(o)}))};function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var n,r=o("select","user-selector"),i=function(){var e=o("option");return e.value="default",e.hidden=!0,e.selected="true",e.innerHTML="Select user",e}(),a=function(e,t){var n=[];return e.forEach((function(e){var r=o("option");r.value=e.id,r.innerHTML="".concat(e.name),t&&t.userId==e.id&&(r.selected="true"),n.push(r)})),n}(e,t);return r.name="user-selector",(n=r).append.apply(n,[i].concat(p(a))),r}function f(e,t){var n=o("div","todo-popup-form-actions"),r=m(e,t),i=function(){var e=o("div","todo-popup-form-buttons"),t=o("button","cancel-btn"),n=o("button","confirm-btn");return t.type="button",t.innerHTML="Cancel",n.type="button",n.innerHTML="Confirm",e.append(t,n),e}();return n.append(r,i),n}function v(e,t){var n=o("form","todo-popup-form-add"),r=function(e){var t=o("input","todo-item-title");return t.type="text",t.placeholder="Enter todo title ...",t.value=e?e.title:"",t}(t),i=function(e){var t=o("textarea","todo-item-description");return t.placeholder="Enter todo description ...",t.value=e?e.description:"",t}(t),a=f(e,t);return n.append(r,i,a),n}function y(e,t){var n=document.querySelector("body"),r=o("div","todo-popup"),i=o("div","todo-popup-body"),a=o("div","todo-popup-content"),u=v(e,t);a.append(u),i.append(a),r.append(i),n.append(r)}function g(){document.querySelector(".todo-popup").remove()}var h=function(e,t,n,r){this.id=e,this.title=t,this.description=n,this.userId=r,this.state=i,this.date=(new Date).toLocaleDateString()};function S(e,t){var n=document.querySelector("body"),r=o("div","warning-popup"),i=o("div","warning-popup-body"),a=o("div","warning-popup-content"),u=function(e){var t=o("span","warning-popup-text");return t.innerHTML=e,t}(e),c=function(e){var t=o("form","warning-popup-form");if(e){var n=o("button","warning-popup-cancel-btn");n.type="button",n.innerHTML="Cancel",t.append(n)}var r=o("button","warning-popup-confirm-btn");return r.type="button",r.innerHTML="Confirm",t.append(r),t}(t);a.append(u,c),i.append(a),r.append(i),n.append(r)}function L(){document.querySelector(".warning-popup").remove()}var b=function(){var e=document.querySelectorAll(".list"),t=document.querySelector("#new-todo-count"),n=document.querySelector("#in-progress-todo-count"),r=document.querySelector("#completed-todo-count");t.innerHTML=e[0].childElementCount,n.innerHTML=e[1].childElementCount,r.innerHTML=e[2].childElementCount};var q=function(e,t,n){var r=document.querySelectorAll(".popup-error-message"),i=!0;if(r.length>0&&r.forEach((function(e){return e.remove()})),!e||!t||!n){var a=document.querySelector(".todo-item-title"),u=document.querySelector(".todo-item-description"),c=document.querySelector(".todo-popup-form-actions");if(i=!1,!e){var d=o("span","popup-error-message");d.innerHTML="Field title can not be empty",a.after(d)}if(!t){var l=o("span","popup-error-message");l.innerHTML="Field description can not be empty",u.after(l)}if(!n){var s=o("span","popup-error-message");s.innerHTML="Field select can not be empty",c.after(s)}}return i};function w(e){return Number(e.split("_")[1])}var k=null;function E(e){k=e.target,setTimeout((function(){e.target.classList.add("hidden-state")}),0)}function H(e){setTimeout((function(){e.target.classList.remove("hidden-state"),k=null}),0)}function T(e){e.preventDefault()}function C(t){var r=t.target.closest(".boards-item"),o=r.querySelector(".list");if(o.childElementCount>=6&&o.closest("#boards-item_in-progress"))return S("6 items is a maximum count of todo items in this boards",!1),void document.querySelector(".warning-popup-confirm-btn").addEventListener("click",(function(e){e.preventDefault(),e.target.classList.remove("hidden-state"),L()}));var i=function(e){return e.split("_")[1].replace("-"," ")}(r.id),a=w(k.id);e.find((function(e){return e.id==a})).state=i,function(e,t){e.querySelector(".list-item-actions").remove();var n=c(t);e.append(n)}(k,i),n(),this.append(k),b()}function I(){var r=document.querySelector(".add-btn"),o=document.querySelectorAll(".list"),i=document.querySelector(".delete-all-btn");r.addEventListener("click",(function(){y(t);var r=document.querySelector(".cancel-btn"),i=document.querySelector(".confirm-btn");r.addEventListener("click",(function(e){e.preventDefault(),g()})),i.addEventListener("click",(function(r){r.preventDefault();var i=function(){var t=document.querySelector(".todo-item-description"),n=document.querySelector(".todo-item-title"),r=document.querySelector(".user-selector"),o=e.length>0?e[e.length-1].id+1:0,i=n.value,a=t.value,u=Number(r.options[r.selectedIndex].value);if(!q(i,a,u))return;return new h(o,i,a,u)}();if(i){var a,u=t.find((function(e){return e.id==i.userId})),c=d(i,u);e.push(i),o[0].append(c),n(),(a=c).addEventListener("dragstart",E),a.addEventListener("dragend",H),g(),b()}}))})),i.addEventListener("click",(function(){S("Do you really want to delete all items?",!0);var t=document.querySelector(".warning-popup-cancel-btn"),r=document.querySelector(".warning-popup-confirm-btn");t.addEventListener("click",(function(e){e.preventDefault(),L()})),r.addEventListener("click",(function(t){t.preventDefault(),document.querySelector("#boards-item_completed").querySelector(".list").innerHTML="",function(){for(var t=0;t<e.length;t++)e[t].state==u&&(e.splice(t,1),t--)}(),n(),L(),b()}))})),o.forEach((function(r){return r.addEventListener("click",(function(r){var o=r.target.closest(".list-item"),i=r.target.classList,a=w(o.id),u=e.findIndex((function(e){return e.id===a}));if(i.contains("list-item-delete")&&(e.splice(u,1),o.remove(),n(),b()),i.contains("list-item-edit")){y(t,e[u]);var c=document.querySelector(".cancel-btn"),d=document.querySelector(".confirm-btn");c.addEventListener("click",(function(e){e.preventDefault(),g()})),d.addEventListener("click",(function(r){r.preventDefault();var i=e[u];(function(e){var t=document.querySelector(".todo-item-title"),n=document.querySelector(".todo-item-description"),r=document.querySelector(".user-selector"),o=t.value,i=n.value,a=Number(r.options[r.selectedIndex].value);if(!q(o,i,a))return;return e.title=o,e.description=i,e.userId=a,e.date=(new Date).toLocaleDateString(),e})(i)&&(!function(e,n){var r=e.querySelector(".list-item-title"),o=e.querySelector(".list-item-description"),i=e.querySelector(".user-info"),a=e.querySelector(".time-info");r.innerHTML=n.title,o.innerHTML=n.description,i.innerHTML=t.find((function(e){return e.id==n.userId})).name,a.innerHTML=(new Date).toLocaleDateString()}(o,i),n(),g())}))}}))}))}var M=function(){setInterval((function(){var e=new Date;document.querySelector(".clock").innerHTML=e.toLocaleTimeString()}),1e3)};function D(){var e,t;M(),l(),b(),I(),e=document.querySelectorAll(".list-item"),t=document.querySelectorAll(".list"),e.forEach((function(e){e.addEventListener("dragstart",E),e.addEventListener("dragend",H)})),t.forEach((function(e){e.addEventListener("dragover",T),e.addEventListener("drop",C)}))}(function(){return fetch("https://jsonplaceholder.typicode.com/users").then((function(e){return e.json()}))})().then((function(e){return r(e)})).then((function(){return D()}))}();
//# sourceMappingURL=index.bc45b984.js.map
